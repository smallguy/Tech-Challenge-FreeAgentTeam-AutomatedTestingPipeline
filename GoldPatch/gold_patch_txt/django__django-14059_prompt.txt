# 修复代码生成提示词（实例ID：django__django-14059）
## 代码仓库
django/django

## 原始问题描述
Can create model instance with conflicting args and kwargs value for the same field
Description
	 
		(last modified by Anton Samarchyan)
	 
Discovered while working on #18586
To reproduce it, add the following test (it's using tests.basic.models.Article)
	from django.utils import six
	def test_cannot_specify_same_field_with_args_and_kwargs_too(self):
		six.assertRaisesRegex(
			self,
			TypeError,
			"__init__() got multiple values for argument 'headline'",
			Article,
			None, # id
			'args based headline',
			headline='kwargs based headline',
			pub_date=datetime(2005, 7, 31),
		)


## 参考黄金补丁（正确的修复方案）
diff --git a/tests/basic/tests.py b/tests/basic/tests.py
--- a/tests/basic/tests.py
+++ b/tests/basic/tests.py
@@ -68,6 +68,15 @@ def test_can_mix_and_match_position_and_kwargs(self):
         a.save()
         self.assertEqual(a.headline, 'Fourth article')
 
+    def test_positional_and_keyword_args_for_the_same_field(self):
+        msg = "Article() got both positional and keyword arguments for field '%s'."
+        with self.assertRaisesMessage(TypeError, msg % 'headline'):
+            Article(None, 'Fifth article', headline='Other headline.')
+        with self.assertRaisesMessage(TypeError, msg % 'headline'):
+            Article(None, 'Sixth article', headline='')
+        with self.assertRaisesMessage(TypeError, msg % 'pub_date'):
+            Article(None, 'Seventh article', datetime(2021, 3, 1), pub_date=None)
+
     def test_cannot_create_instance_with_invalid_kwargs(self):
         with self.assertRaisesMessage(TypeError, "Article() got an unexpected keyword argument 'foo'"):
             Article(