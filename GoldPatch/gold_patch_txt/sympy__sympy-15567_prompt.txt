# 修复代码生成提示词（实例ID：sympy__sympy-15567）
## 代码仓库
sympy/sympy

## 原始问题描述
SymPy's Number.__divmod__ doesn't agree with the builtin divmod
```py
>>> divmod(4, -2.1)
(-2.0, -0.20000000000000018)
>>> divmod(S(4), S(-2.1))
(-1, 1.9)
```

Both are mathematically correct according to the invariant in the `divmod` docstring, `div*y + mod == x`, but we should be consistent with Python. In general in Python, the sign of mod should be the same as the sign of the second argument.

```py
>>> -1*-2.1 + 1.9
4.0
>>> -2.0*-2.1 + -0.2
4.0
```

Our `Mod` is already correct, so it's just `Number.__divmod__` that needs to be corrected

```py
>>> Mod(4, -2.1)
-0.200000000000000
```


## 参考黄金补丁（正确的修复方案）
diff --git a/sympy/core/tests/test_numbers.py b/sympy/core/tests/test_numbers.py
--- a/sympy/core/tests/test_numbers.py
+++ b/sympy/core/tests/test_numbers.py
@@ -191,6 +191,9 @@ def test_divmod():
     assert divmod(S(-3), S(2)) == (-2, 1)
     assert divmod(S(-3), 2) == (-2, 1)
 
+    assert divmod(S(4), S(-3.1)) == Tuple(-2, -2.2)
+    assert divmod(S(4), S(-2.1)) == divmod(4, -2.1)
+    assert divmod(S(-8), S(-2.5) ) == Tuple(3 , -0.5)
 
 def test_igcd():
     assert igcd(0, 0) == 0