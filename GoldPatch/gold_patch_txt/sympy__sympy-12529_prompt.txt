# 修复代码生成提示词（实例ID：sympy__sympy-12529）
## 代码仓库
sympy/sympy

## 原始问题描述
Totient of any non-integer number
According to the Totient function definition on [wikipedia](http://en.wikipedia.org/wiki/Euler%27s_totient_function), the totient of non-integer numbers is not there. But in sympy:

```
>>> totient(2.3)
totient(2.3)
```

the value is returned, instead of an error.



## 参考黄金补丁（正确的修复方案）
diff --git a/sympy/ntheory/tests/test_factor_.py b/sympy/ntheory/tests/test_factor_.py
--- a/sympy/ntheory/tests/test_factor_.py
+++ b/sympy/ntheory/tests/test_factor_.py
@@ -301,6 +301,9 @@ def test_totient():
     assert totient(5009) == 5008
     assert totient(2**100) == 2**99
 
+    raises(ValueError, lambda: totient(30.1))
+    raises(ValueError, lambda: totient(20.001))
+
     m = Symbol("m", integer=True)
     assert totient(m)
     assert totient(m).subs(m, 3**10) == 3**10 - 3**9
@@ -309,6 +312,16 @@ def test_totient():
     n = Symbol("n", integer=True, positive=True)
     assert totient(n).is_integer
 
+    x=Symbol("x", integer=False)
+    raises(ValueError, lambda: totient(x))
+
+    y=Symbol("y", positive=False)
+    raises(ValueError, lambda: totient(y))
+
+    z=Symbol("z", positive=True, integer=True)
+    raises(ValueError, lambda: totient(2**(-z)))
+
+
 def test_reduced_totient():
     assert [reduced_totient(k) for k in range(1, 16)] == \
         [1, 1, 2, 2, 4, 2, 6, 2, 6, 4, 10, 2, 12, 6, 4]