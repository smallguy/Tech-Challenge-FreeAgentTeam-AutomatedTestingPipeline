# 修复代码生成提示词（实例ID：matplotlib__matplotlib-25126）
## 代码仓库
matplotlib/matplotlib

## 原始问题描述
[Bug]: ax.plot(x,y) disappears after changing y_scale
### Bug summary

The output of ax.plot(x,y) disappears while changing y_scale from 'log' (initial scale for the y axis) to 'linear'. 


### Code for reproduction

```python
import numpy as np
import matplotlib.pyplot as plt

samples = np.random.normal(size = 1000)
x = np.linspace(-5,5,1000)
fig, ax = plt.subplots()
ax.hist(samples, log = True, density = True)
ax.plot(x, np.exp(-x**2/2)/np.sqrt(2*np.pi))
fig.savefig('log.pdf')
ax.set_yscale('linear')
fig.savefig('lin.pdf')
```


### Actual outcome

[lin.pdf](https://github.com/matplotlib/matplotlib/files/10559533/lin.pdf)
[log.pdf](https://github.com/matplotlib/matplotlib/files/10559534/log.pdf)


### Expected outcome

[lin.pdf](https://github.com/matplotlib/matplotlib/files/10559549/lin.pdf)
[log.pdf](https://github.com/matplotlib/matplotlib/files/10559550/log.pdf)


### Additional information

The expected outcome is generated with matplotlib==3.5.3 
fill_between and hist are working fine.

### Operating system

MacOSX

### Matplotlib Version

3.6.3

### Matplotlib Backend

MacOSX

### Python version

3.9.13

### Jupyter version

_No response_

### Installation

pip


## 参考黄金补丁（正确的修复方案）
diff --git a/lib/matplotlib/tests/test_transforms.py b/lib/matplotlib/tests/test_transforms.py
--- a/lib/matplotlib/tests/test_transforms.py
+++ b/lib/matplotlib/tests/test_transforms.py
@@ -10,7 +10,7 @@
 import matplotlib.patches as mpatches
 import matplotlib.transforms as mtransforms
 from matplotlib.path import Path
-from matplotlib.testing.decorators import image_comparison
+from matplotlib.testing.decorators import image_comparison, check_figures_equal
 
 
 def test_non_affine_caching():
@@ -730,3 +730,17 @@ def test_transformwrapper():
             r"The input and output dims of the new child \(1, 1\) "
             r"do not match those of current child \(2, 2\)")):
         t.set(scale.LogTransform(10))
+
+
+@check_figures_equal(extensions=["png"])
+def test_scale_swapping(fig_test, fig_ref):
+    np.random.seed(19680801)
+    samples = np.random.normal(size=10)
+    x = np.linspace(-5, 5, 10)
+
+    for fig, log_state in zip([fig_test, fig_ref], [True, False]):
+        ax = fig.subplots()
+        ax.hist(samples, log=log_state, density=True)
+        ax.plot(x, np.exp(-(x**2) / 2) / np.sqrt(2 * np.pi))
+        fig.canvas.draw()
+        ax.set_yscale('linear')