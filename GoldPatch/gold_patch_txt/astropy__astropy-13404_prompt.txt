# 修复代码生成提示词（实例ID：astropy__astropy-13404）
## 代码仓库
astropy/astropy

## 原始问题描述
Masked ``_array2string`` doesn't work on some structured arrays
### Description

The dispatch function ``_array2string `` in ``masked.function_helpers`` doesn't work on arrays with strutcured dtypes.

### Expected behavior

Masked arrays with structured dtypes can be printed no prob, like their non-masked counterparts.

### Actual behavior

It errors because of the structured dtype.

### Steps to Reproduce

Here's an example:

```python
from astropy.utils.masked import Masked
from astropy.uncertainty import Distribution

arr = np.array(Distribution(((np.random.beta(2,5, 10000)-(2/7))/2 + 3)))  # just for convenience.
x = Masked(arr, mask=False)

repr(x)
```

While the following works:

```
repr(arr)
```

### System Details

macOS-10.16-x86_64-i386-64bit
Python 3.9.12 (main, Jun  1 2022, 06:36:29) 
[Clang 12.0.0 ]
Numpy 1.22.3
pyerfa 2.0.0.1
astropy 5.2.dev131+ga2da0589eb.d20220607
Scipy 1.8.1
Matplotlib 3.5.2



## 参考黄金补丁（正确的修复方案）
diff --git a/astropy/utils/masked/tests/test_masked.py b/astropy/utils/masked/tests/test_masked.py
--- a/astropy/utils/masked/tests/test_masked.py
+++ b/astropy/utils/masked/tests/test_masked.py
@@ -50,6 +50,16 @@ def setup_class(self):
         self.sb = np.array([(1., 2.), (-3., 4.)], dtype=self.sdt)
         self.mask_sb = np.array([(True, False), (False, False)],
                                 dtype=self.mask_sdt)
+        self.scdt = np.dtype([('sa', '2f8'), ('sb', 'i8', (2, 2))])
+        self.sc = np.array([([1., 2.], [[1, 2], [3, 4]]),
+                            ([-1., -2.], [[-1, -2], [-3, -4]])],
+                           dtype=self.scdt)
+        self.mask_scdt = np.dtype([('sa', '2?'), ('sb', '?', (2, 2))])
+        self.mask_sc = np.array([([True, False], [[False, False],
+                                                  [True, True]]),
+                                 ([False, True], [[True, False],
+                                                  [False, True]])],
+                                dtype=self.mask_scdt)
 
 
 class QuantitySetup(ArraySetup):
@@ -385,6 +395,7 @@ def setup_class(self):
         self.mc = Masked(self.c, mask=self.mask_c)
         self.msa = Masked(self.sa, mask=self.mask_sa)
         self.msb = Masked(self.sb, mask=self.mask_sb)
+        self.msc = Masked(self.sc, mask=self.mask_sc)
 
 
 class TestViewing(MaskedArraySetup):
@@ -1237,12 +1248,15 @@ def test_array_str(self):
         str(self.mc)
         str(self.msa)
         str(self.msb)
+        str(self.msc)
 
     def test_scalar_str(self):
         assert self.mb[0].shape == ()
         str(self.mb[0])
         assert self.msb[0].shape == ()
         str(self.msb[0])
+        assert self.msc[0].shape == ()
+        str(self.msc[0])
 
     def test_array_repr(self):
         repr(self.ma)
@@ -1250,10 +1264,12 @@ def test_array_repr(self):
         repr(self.mc)
         repr(self.msa)
         repr(self.msb)
+        repr(self.msc)
 
     def test_scalar_repr(self):
         repr(self.mb[0])
         repr(self.msb[0])
+        repr(self.msc[0])
 
 
 class TestMaskedQuantityRepr(TestMaskedArrayRepr, QuantitySetup):