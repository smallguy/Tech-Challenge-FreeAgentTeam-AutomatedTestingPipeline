# 修复代码生成提示词（实例ID：sympy__sympy-18605）
## 代码仓库
sympy/sympy

## 原始问题描述
Idx object can accepts non-integer bounds
It is my understanding that this code should not work: the lower and upper bounds should be integers. Instead it runs without any errors:

```
import sympy as sp
m, n = sp.symbols("m, n", real=True)
i = sp.Idx("i", (m, n))
```

Note however that:

```
sp.Idx("i", m)
```

produces the expected result:

```
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-59-166e71a7f3f7> in <module>
----> 1 sp.Idx("i", m)

/usr/local/lib/python3.7/dist-packages/sympy/tensor/indexed.py in __new__(cls, label, range, **kw_args)
    665         elif isinstance(range, Expr):
    666             if not (range.is_integer or range is S.Infinity):
--> 667                 raise TypeError("Idx object requires an integer dimension.")
    668             args = label, Tuple(0, range - 1)
    669         elif range:

TypeError: Idx object requires an integer dimension.
```

The check for integer dimension should be done to both upper and lower bounds when a tuple is given as argument.


## 参考黄金补丁（正确的修复方案）
diff --git a/sympy/tensor/tests/test_indexed.py b/sympy/tensor/tests/test_indexed.py
--- a/sympy/tensor/tests/test_indexed.py
+++ b/sympy/tensor/tests/test_indexed.py
@@ -422,6 +422,14 @@ def test_issue_12780():
     raises(TypeError, lambda: i.subs(n, 1.5))
 
 
+def test_issue_18604():
+    m = symbols("m")
+    assert Idx("i", m).name == 'i'
+    assert Idx("i", m).lower == 0
+    assert Idx("i", m).upper == m - 1
+    m = symbols("m", real=False)
+    raises(TypeError, lambda: Idx("i", m))
+
 def test_Subs_with_Indexed():
     A = IndexedBase("A")
     i, j, k = symbols("i,j,k")