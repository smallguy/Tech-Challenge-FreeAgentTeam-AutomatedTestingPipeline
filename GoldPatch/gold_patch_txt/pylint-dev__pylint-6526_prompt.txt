# 修复代码生成提示词（实例ID：pylint-dev__pylint-6526）
## 代码仓库
pylint-dev/pylint

## 原始问题描述
How does pylint decide where it should put stat files?
### Question

I am from the VS Code python extension team, working on building an extension for VS Code using pylint. We have pre-release version out. An issue was reported on the extension that it creates pylint stat files in the project directory. We are not specifically passing anything to change the stat file location (see issue here https://github.com/microsoft/vscode-pylint/issues/30).

Generally, the stat files go into pre-set directory like %USERPROFILE%/AppData/Local/pylint on windows. What can cause these to be written to the current working directory.

We use pass the source code into pylint via stdin, and the only two arguments we use are `--reports=n`, `--output-format=json`. Any clue to debug this would be helpful.


### Documentation for future user

I could not find fall back location for the stat files and when would the fallback location be used.

### Additional context

We use `runpy.run_module` to run pylint, and we send source to pylint via stdin. 
Relevant code here: https://github.com/microsoft/vscode-pylint/blob/725fc7ae415a9638e2a44e922cf5133efde62811/bundled/linter/utils.py#L146-L168





## 参考黄金补丁（正确的修复方案）
diff --git a/tests/lint/test_caching.py b/tests/lint/test_caching.py
--- a/tests/lint/test_caching.py
+++ b/tests/lint/test_caching.py
@@ -5,6 +5,7 @@
 # Pytest fixtures work like this by design
 # pylint: disable=redefined-outer-name
 
+import sys
 from pathlib import Path
 
 import pytest
@@ -18,15 +19,67 @@
 
 
 @pytest.mark.parametrize(
-    "path,recur,expected",
+    "path,recur,pylint_home,expected",
     [
-        ["", 1, PYLINT_HOME_PATH / "_1.stats"],
-        ["", 2, PYLINT_HOME_PATH / "_2.stats"],
-        ["a/path", 42, PYLINT_HOME_PATH / "a_path_42.stats"],
+        ["", 1, PYLINT_HOME_PATH, PYLINT_HOME_PATH / "_1.stats"],
+        ["", 2, PYLINT_HOME_PATH, PYLINT_HOME_PATH / "_2.stats"],
+        ["a/path", 42, PYLINT_HOME_PATH, PYLINT_HOME_PATH / "a_path_42.stats"],
     ],
 )
-def test__get_pdata_path(path: str, recur: int, expected: Path) -> None:
-    assert _get_pdata_path(Path(path), recur) == expected
+def test__get_pdata_path(
+    path: str, recur: int, pylint_home: Path, expected: Path
+) -> None:
+    assert _get_pdata_path(Path(path), recur, pylint_home) == expected
+
+
+@pytest.mark.skipif(sys.platform == "win32", reason="Path type of *nix")
+@pytest.mark.parametrize(
+    "path,recur,pylint_home,expected",
+    [
+        [
+            "/workspace/MyDir/test.py",
+            1,
+            Path("/root/.cache/pylint"),
+            Path("/root/.cache/pylint") / "__workspace_MyDir_test.py_1.stats",
+        ],
+        [
+            "/workspace/MyDir/test.py",
+            1,
+            Path("//host/computer/.cache"),
+            Path("//host/computer/.cache") / "__workspace_MyDir_test.py_1.stats",
+        ],
+    ],
+)
+def test__get_pdata_path_nix(
+    path: str, recur: int, pylint_home: Path, expected: Path
+) -> None:
+    """test__get_pdata_path but specifically for *nix system paths."""
+    assert _get_pdata_path(Path(path), recur, pylint_home) == expected
+
+
+@pytest.mark.skipif(sys.platform != "win32", reason="Path type of windows")
+@pytest.mark.parametrize(
+    "path,recur,pylint_home,expected",
+    [
+        [
+            "D:\\MyDir\\test.py",
+            1,
+            Path("C:\\Users\\MyPylintHome"),
+            Path("C:\\Users\\MyPylintHome") / "D___MyDir_test.py_1.stats",
+        ],
+        [
+            "C:\\MyDir\\test.py",
+            1,
+            Path("C:\\Users\\MyPylintHome"),
+            Path("C:\\Users\\MyPylintHome") / "C___MyDir_test.py_1.stats",
+        ],
+    ],
+)
+def test__get_pdata_path_windows(
+    path: str, recur: int, pylint_home: Path, expected: Path
+) -> None:
+    """test__get_pdata_path but specifically for windows."""
+    assert _get_pdata_path(Path(path), recur, pylint_home) == expected
 
 
 @pytest.fixture