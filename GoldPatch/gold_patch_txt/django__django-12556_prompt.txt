# 修复代码生成提示词（实例ID：django__django-12556）
## 代码仓库
django/django

## 原始问题描述
Deprecate using get_random_string without an explicit length
Description
	
django.utils.crypto.get_random_string currently has a default length value (12). I think we should force callers to specify the length value and not count on a default.


## 参考黄金补丁（正确的修复方案）
diff --git a/tests/utils_tests/test_crypto.py b/tests/utils_tests/test_crypto.py
--- a/tests/utils_tests/test_crypto.py
+++ b/tests/utils_tests/test_crypto.py
@@ -1,10 +1,12 @@
 import hashlib
 import unittest
 
-from django.test import SimpleTestCase
+from django.test import SimpleTestCase, ignore_warnings
 from django.utils.crypto import (
-    InvalidAlgorithm, constant_time_compare, pbkdf2, salted_hmac,
+    InvalidAlgorithm, constant_time_compare, get_random_string, pbkdf2,
+    salted_hmac,
 )
+from django.utils.deprecation import RemovedInDjango40Warning
 
 
 class TestUtilsCryptoMisc(SimpleTestCase):
@@ -183,3 +185,14 @@ def test_regression_vectors(self):
     def test_default_hmac_alg(self):
         kwargs = {'password': b'password', 'salt': b'salt', 'iterations': 1, 'dklen': 20}
         self.assertEqual(pbkdf2(**kwargs), hashlib.pbkdf2_hmac(hash_name=hashlib.sha256().name, **kwargs))
+
+
+class DeprecationTests(SimpleTestCase):
+    @ignore_warnings(category=RemovedInDjango40Warning)
+    def test_get_random_string(self):
+        self.assertEqual(len(get_random_string()), 12)
+
+    def test_get_random_string_warning(self):
+        msg = 'Not providing a length argument is deprecated.'
+        with self.assertRaisesMessage(RemovedInDjango40Warning, msg):
+            get_random_string()