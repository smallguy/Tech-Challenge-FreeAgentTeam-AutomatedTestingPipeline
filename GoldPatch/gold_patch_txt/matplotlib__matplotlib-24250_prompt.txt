# 修复代码生成提示词（实例ID：matplotlib__matplotlib-24250）
## 代码仓库
matplotlib/matplotlib

## 原始问题描述
[Bug]: pick events do not forward mouseevent-key on Linux
### Bug summary

Somehow on `CentOS Linux 7` keyboard-buttons are not forwarded with `pick_events`... on `Windows 10` everything works as expected.


### Code for reproduction

```python
import matplotlib.pyplot as plt

f, ax = plt.subplots()
s = ax.scatter([1,2,3,4], [1,2,3,4], s=1000)
s.set_picker(True)

def doit(event):
    if event.name == "button_press_event":
        print(event.name, event.key)
    if event.name == "pick_event":
        print(event.name, event.mouseevent.key)

f.canvas.mpl_connect("button_press_event", doit)
f.canvas.mpl_connect("pick_event", doit)
```


### Actual outcome
When clicking on one of the datapoints while pressing the buttons `1` `2` and `3` the following happens:

on Windows I get:

```python
pick_event 1
button_press_event 1
pick_event 2
button_press_event 2
pick_event 3
button_press_event 3
```
on CentOS Linux I get:

```python
pick_event None
button_press_event 1
pick_event None
button_press_event 2
pick_event None
button_press_event 3
```

### Expected outcome

The same output for both OS

### Operating system

Windows / Linux CentOS7

### Matplotlib Version

3.6.1

### Matplotlib Backend

Qt5Agg

### Python version

3.9.13


### Installation

conda


## 参考黄金补丁（正确的修复方案）
diff --git a/lib/matplotlib/tests/test_backend_bases.py b/lib/matplotlib/tests/test_backend_bases.py
--- a/lib/matplotlib/tests/test_backend_bases.py
+++ b/lib/matplotlib/tests/test_backend_bases.py
@@ -2,7 +2,7 @@
 
 from matplotlib import path, transforms
 from matplotlib.backend_bases import (
-    FigureCanvasBase, LocationEvent, MouseButton, MouseEvent,
+    FigureCanvasBase, KeyEvent, LocationEvent, MouseButton, MouseEvent,
     NavigationToolbar2, RendererBase)
 from matplotlib.backend_tools import RubberbandBase
 from matplotlib.figure import Figure
@@ -124,12 +124,18 @@ def test_pick():
     fig = plt.figure()
     fig.text(.5, .5, "hello", ha="center", va="center", picker=True)
     fig.canvas.draw()
+
     picks = []
-    fig.canvas.mpl_connect("pick_event", lambda event: picks.append(event))
-    start_event = MouseEvent(
-        "button_press_event", fig.canvas, *fig.transFigure.transform((.5, .5)),
-        MouseButton.LEFT)
-    fig.canvas.callbacks.process(start_event.name, start_event)
+    def handle_pick(event):
+        assert event.mouseevent.key == "a"
+        picks.append(event)
+    fig.canvas.mpl_connect("pick_event", handle_pick)
+
+    KeyEvent("key_press_event", fig.canvas, "a")._process()
+    MouseEvent("button_press_event", fig.canvas,
+               *fig.transFigure.transform((.5, .5)),
+               MouseButton.LEFT)._process()
+    KeyEvent("key_release_event", fig.canvas, "a")._process()
     assert len(picks) == 1