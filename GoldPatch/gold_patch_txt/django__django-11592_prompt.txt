# 修复代码生成提示词（实例ID：django__django-11592）
## 代码仓库
django/django

## 原始问题描述
Start passing FileResponse.block_size to wsgi.file_wrapper.
Description
	 
		(last modified by Chris Jerdonek)
	 
I noticed that Django's FileResponse class has a block_size attribute which can be customized by subclassing: ​https://github.com/django/django/blob/415e899dc46c2f8d667ff11d3e54eff759eaded4/django/http/response.py#L393
but it's not passed to wsgi.file_wrapper. Only the filelike object is passed:
response = environ['wsgi.file_wrapper'](response.file_to_stream)
(from: ​https://github.com/django/django/blob/415e899dc46c2f8d667ff11d3e54eff759eaded4/django/core/handlers/wsgi.py#L144 )


## 参考黄金补丁（正确的修复方案）
diff --git a/tests/wsgi/tests.py b/tests/wsgi/tests.py
--- a/tests/wsgi/tests.py
+++ b/tests/wsgi/tests.py
@@ -3,6 +3,7 @@
 from django.core.signals import request_started
 from django.core.wsgi import get_wsgi_application
 from django.db import close_old_connections
+from django.http import FileResponse
 from django.test import SimpleTestCase, override_settings
 from django.test.client import RequestFactory
 
@@ -51,7 +52,8 @@ def test_file_wrapper(self):
         FileResponse uses wsgi.file_wrapper.
         """
         class FileWrapper:
-            def __init__(self, filelike, blksize=8192):
+            def __init__(self, filelike, block_size=None):
+                self.block_size = block_size
                 filelike.close()
         application = get_wsgi_application()
         environ = self.request_factory._base_environ(
@@ -67,6 +69,7 @@ def start_response(status, headers):
         response = application(environ, start_response)
         self.assertEqual(response_data['status'], '200 OK')
         self.assertIsInstance(response, FileWrapper)
+        self.assertEqual(response.block_size, FileResponse.block_size)
 
 
 class GetInternalWSGIApplicationTest(SimpleTestCase):