# 修复代码生成提示词（实例ID：scikit-learn__scikit-learn-10982）
## 代码仓库
scikit-learn/scikit-learn

## 原始问题描述
[RandomizedSearchCV] Do not enforce that n_iter is less than or equal to size of search space
#### Description

Instantiating `RandomizedSearchCV` with `n_iter` greater than the size of `param_distributions` (i.e. the product of the length of each distribution/array in the grid) will fail with an exception at [this line](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/model_selection/_search.py#L247). This is a bit annoying for me because I have an app where I'm letting the user specify the number of iterations to run from the command line, also I've been fiddling around with the param grid so `grid_size` keeps changing. I don't want to have to work out the exact grid size when it goes below, say, 50; if I specify `--n-iter 50` that should be interpreted as an upper bound on the number of iterations.

Would it be possible to add an option (off by default) to the constructor specifying whether to throw in such cases? e.g. By passing `allow_smaller_grid=True` (the option would default to `False`)



## 参考黄金补丁（正确的修复方案）
diff --git a/sklearn/model_selection/tests/test_search.py b/sklearn/model_selection/tests/test_search.py
--- a/sklearn/model_selection/tests/test_search.py
+++ b/sklearn/model_selection/tests/test_search.py
@@ -1385,10 +1385,18 @@ def test_grid_search_failing_classifier_raise():
 
 
 def test_parameters_sampler_replacement():
-    # raise error if n_iter too large
+    # raise warning if n_iter is bigger than total parameter space
     params = {'first': [0, 1], 'second': ['a', 'b', 'c']}
     sampler = ParameterSampler(params, n_iter=7)
-    assert_raises(ValueError, list, sampler)
+    n_iter = 7
+    grid_size = 6
+    expected_warning = ('The total space of parameters %d is smaller '
+                        'than n_iter=%d. Running %d iterations. For '
+                        'exhaustive searches, use GridSearchCV.'
+                        % (grid_size, n_iter, grid_size))
+    assert_warns_message(UserWarning, expected_warning,
+                         list, sampler)
+
     # degenerates to GridSearchCV if n_iter the same as grid_size
     sampler = ParameterSampler(params, n_iter=6)
     samples = list(sampler)