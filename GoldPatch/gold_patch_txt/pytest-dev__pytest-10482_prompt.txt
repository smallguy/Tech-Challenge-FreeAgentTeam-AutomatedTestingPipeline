# 修复代码生成提示词（实例ID：pytest-dev__pytest-10482）
## 代码仓库
pytest-dev/pytest

## 原始问题描述
Short test summary doesn't show the test name when skipping from a fixture
I'm using Pytest 7.0.1on Ubuntu 18.04 with Python 3.6.9.

Consider a test:
```python
def test_0(bar):
    assert 0
```

and a fixture defined in `conftest.py` that will skip a test based on some conditional check.
```python
import pytest

@pytest.fixture
def bar():
    if some_condition:
        pytest.skip("Skipping")
```

Then running the test with pytest shows something like:
```bash
$ pytest . -rs
================================== test session starts ==================================
platform linux -- Python 3.6.9, pytest-7.0.1, pluggy-1.0.0
rootdir: /tmp/foo
plugins: cpp-2.1.2
collected 1 item                                                                        

test_foo.py s                                                                     [100%]

================================ short test summary info ================================
SKIPPED [1] conftest.py:6: Skipping
================================== 1 skipped in 0.01s ===================================
```

The summary shows that some test was skipped but there's no indication which test was skipped. Instead, it should show the test name rather than the location in the fixture where the `pytest.skip` was called from. If there are multiple tests that are skipped from various locations, matching a test with its skip condition becomes impossible.

There are some similar issues in #114, #748, #760 which may be related.


## 参考黄金补丁（正确的修复方案）
diff --git a/testing/test_skipping.py b/testing/test_skipping.py
--- a/testing/test_skipping.py
+++ b/testing/test_skipping.py
@@ -1439,6 +1439,27 @@ def test_pass():
     )
 
 
+def test_skip_from_fixture(pytester: Pytester) -> None:
+    pytester.makepyfile(
+        **{
+            "tests/test_1.py": """
+        import pytest
+        def test_pass(arg):
+            pass
+        @pytest.fixture
+        def arg():
+            condition = True
+            if condition:
+                pytest.skip("Fixture conditional skip")
+            """,
+        }
+    )
+    result = pytester.runpytest("-rs", "tests/test_1.py", "--rootdir=tests")
+    result.stdout.fnmatch_lines(
+        ["SKIPPED [[]1[]] tests/test_1.py:2: Fixture conditional skip"]
+    )
+
+
 def test_skip_using_reason_works_ok(pytester: Pytester) -> None:
     p = pytester.makepyfile(
         """