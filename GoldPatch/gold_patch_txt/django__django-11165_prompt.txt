# 修复代码生成提示词（实例ID：django__django-11165）
## 代码仓库
django/django

## 原始问题描述
New HTTPRequest.headers not usable in templates because of hyphens
Description
	
With the release of 2.2, I took the opportunity from the new ​HTTPRequest.headers object to clean up old code using e.g. request.META['HTTP_X_REAL_IP'] to request.headers['X-Real-IP'].
However, this new approach does not work with templates, as ​variable lookups cannot use hyphens.
Could the object contain a parallel set of keys in underscored variables? e.g. request.headers['foo-bar'] is also available in request.headers['foo_bar'] and can be looked up with {{ request.headers.foo_bar }} in a template?


## 参考黄金补丁（正确的修复方案）
diff --git a/tests/requests/tests.py b/tests/requests/tests.py
--- a/tests/requests/tests.py
+++ b/tests/requests/tests.py
@@ -896,6 +896,7 @@ def test_wsgi_request_headers_getitem(self):
         request = WSGIRequest(self.ENVIRON)
         self.assertEqual(request.headers['User-Agent'], 'python-requests/1.2.0')
         self.assertEqual(request.headers['user-agent'], 'python-requests/1.2.0')
+        self.assertEqual(request.headers['user_agent'], 'python-requests/1.2.0')
         self.assertEqual(request.headers['Content-Type'], 'text/html')
         self.assertEqual(request.headers['Content-Length'], '100')