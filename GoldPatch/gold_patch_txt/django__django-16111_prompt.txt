# 修复代码生成提示词（实例ID：django__django-16111）
## 代码仓库
django/django

## 原始问题描述
Add support for microseconds to Now() on MySQL and SQLite.
Description
	
Add support for microseconds to Now() on MySQL and SQLite.
​PR


## 参考黄金补丁（正确的修复方案）
diff --git a/tests/db_functions/datetime/test_now.py b/tests/db_functions/datetime/test_now.py
--- a/tests/db_functions/datetime/test_now.py
+++ b/tests/db_functions/datetime/test_now.py
@@ -1,6 +1,8 @@
 from datetime import datetime, timedelta
 
-from django.db.models.functions import Now
+from django.db import connection
+from django.db.models import TextField
+from django.db.models.functions import Cast, Now
 from django.test import TestCase
 from django.utils import timezone
 
@@ -47,3 +49,17 @@ def test_basic(self):
             ["How to Time Travel"],
             lambda a: a.title,
         )
+
+    def test_microseconds(self):
+        Article.objects.create(
+            title="How to Django",
+            text=lorem_ipsum,
+            written=timezone.now(),
+        )
+        now_string = (
+            Article.objects.annotate(now_string=Cast(Now(), TextField()))
+            .get()
+            .now_string
+        )
+        precision = connection.features.time_cast_precision
+        self.assertRegex(now_string, rf"^.*\.\d{{1,{precision}}}")