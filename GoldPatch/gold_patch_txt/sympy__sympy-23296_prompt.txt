# 修复代码生成提示词（实例ID：sympy__sympy-23296）
## 代码仓库
sympy/sympy

## 原始问题描述
Dimensionless number in exponent not recognized as dimensionless in _collect_factor_and_dimension
The following raises an error:
```python
from sympy import S, exp
from sympy.physics.units import energy, length, mass, time, Quantity
u = Quantity("u")
v = Quantity("v")
SI.set_quantity_dimension(u, energy)
SI.set_quantity_dimension(v, energy)
Quantity._collect_factor_and_dimension(1 + exp(u/v))
```
returns:
`ValueError: Dimension of "exp(u/w)" is exp(Dimension(1)), but it should be Dimension(1)`

Using `check_dimensions` does not raise an error here:
```python
from sympy.physics.units.util import convert_to, check_dimensions
check_dimensions(1 + exp(u/v))
```


Added fix for wrong dimension calculations in case of some mathematical functions
…al functions

<!-- Your title above should be a short description of what
was changed. Do not include the issue number in the title. -->

#### References to other Issues or PRs
<!-- If this pull request fixes an issue, write "Fixes #NNNN" in that exact
format, e.g. "Fixes #1234" (see
https://tinyurl.com/auto-closing for more information). Also, please
write a comment on that issue linking back to this pull request once it is
open. -->
Fixes #20288 

#### Brief description of what is fixed or changed
Fixed the return value for the function _collect_factor_and_dimension(). Previous return value led to wrong dimensional evaluation for expressions containing predefined mathematical functions.

#### Other comments


#### Release Notes

<!-- Write the release notes for this release below. See
https://github.com/sympy/sympy/wiki/Writing-Release-Notes for more information
on how to write release notes. The bot will check your release notes
automatically to see if they are formatted correctly. -->

<!-- BEGIN RELEASE NOTES -->
* physics.units
    * Fixed dimensional evaluation for expressions containing predefined mathematical functions. 
<!-- END RELEASE NOTES -->


## 参考黄金补丁（正确的修复方案）
diff --git a/sympy/physics/units/tests/test_quantities.py b/sympy/physics/units/tests/test_quantities.py
--- a/sympy/physics/units/tests/test_quantities.py
+++ b/sympy/physics/units/tests/test_quantities.py
@@ -528,6 +528,19 @@ def test_issue_22819():
     assert Da.scale_factor == 1.66053906660000e-24
 
 
+def test_issue_20288():
+    from sympy.core.numbers import E
+    from sympy.physics.units import energy
+    u = Quantity('u')
+    v = Quantity('v')
+    SI.set_quantity_dimension(u, energy)
+    SI.set_quantity_dimension(v, energy)
+    u.set_global_relative_scale_factor(1, joule)
+    v.set_global_relative_scale_factor(1, joule)
+    expr = 1 + exp(u**2/v**2)
+    assert SI._collect_factor_and_dimension(expr) == (1 + E, Dimension(1))
+
+
 def test_prefixed_property():
     assert not meter.is_prefixed
     assert not joule.is_prefixed