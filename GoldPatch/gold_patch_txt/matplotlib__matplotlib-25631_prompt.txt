# 修复代码生成提示词（实例ID：matplotlib__matplotlib-25631）
## 代码仓库
matplotlib/matplotlib

## 原始问题描述
[Bug]: `bbox_inches="tight"` does not work for writer.grab_frame()
### Bug summary

 `bbox_inches="tight"` will make snowflake movie in the example.

The example runs fine after removing  `bbox_inches="tight"`.

### Code for reproduction

```python
import matplotlib.pyplot as plt
from matplotlib.animation import FFMpegWriter
import numpy as np

fig, ax = plt.subplots()

moviewriter = FFMpegWriter()

moviewriter.setup(fig, 'movie.mp4', dpi=200)


line = ax.plot([], [])[0]
    
    
x = np.linspace(0,2*np.pi,20)
ax.set(xlim=[0, 2*np.pi], ylim=[-1.1, 1.1])
for t in np.linspace(0,2*np.pi,20):    
    line.set_data(x, np.sin(x-t))
    moviewriter.grab_frame(bbox_inches='tight')
    
moviewriter.finish()
```


### Actual outcome


https://user-images.githubusercontent.com/5205922/229658612-06326a41-eaeb-4bb5-8151-c04954eb8458.mp4



### Expected outcome


https://user-images.githubusercontent.com/5205922/229658664-691f81ae-4fa4-4613-9b8a-43657ff8b66d.mp4



### Additional information

_No response_

### Operating system

_No response_

### Matplotlib Version

3.7.1

### Matplotlib Backend

_No response_

### Python version

_No response_

### Jupyter version

_No response_

### Installation

None


## 参考黄金补丁（正确的修复方案）
diff --git a/lib/matplotlib/tests/test_animation.py b/lib/matplotlib/tests/test_animation.py
--- a/lib/matplotlib/tests/test_animation.py
+++ b/lib/matplotlib/tests/test_animation.py
@@ -62,6 +62,8 @@ def setup(self, fig, outfile, dpi, *args):
         self._count = 0
 
     def grab_frame(self, **savefig_kwargs):
+        from matplotlib.animation import _validate_grabframe_kwargs
+        _validate_grabframe_kwargs(savefig_kwargs)
         self.savefig_kwargs = savefig_kwargs
         self._count += 1
 
@@ -193,6 +195,38 @@ def test_save_animation_smoketest(tmpdir, writer, frame_format, output, anim):
     del anim
 
 
+@pytest.mark.parametrize('writer, frame_format, output', gen_writers())
+def test_grabframe(tmpdir, writer, frame_format, output):
+    WriterClass = animation.writers[writer]
+
+    if frame_format is not None:
+        plt.rcParams["animation.frame_format"] = frame_format
+
+    fig, ax = plt.subplots()
+
+    dpi = None
+    codec = None
+    if writer == 'ffmpeg':
+        # Issue #8253
+        fig.set_size_inches((10.85, 9.21))
+        dpi = 100.
+        codec = 'h264'
+
+    test_writer = WriterClass()
+    # Use temporary directory for the file-based writers, which produce a file
+    # per frame with known names.
+    with tmpdir.as_cwd():
+        with test_writer.saving(fig, output, dpi):
+            # smoke test it works
+            test_writer.grab_frame()
+            for k in {'dpi', 'bbox_inches', 'format'}:
+                with pytest.raises(
+                        TypeError,
+                        match=f"grab_frame got an unexpected keyword argument {k!r}"
+                ):
+                    test_writer.grab_frame(**{k: object()})
+
+
 @pytest.mark.parametrize('writer', [
     pytest.param(
         'ffmpeg', marks=pytest.mark.skipif(