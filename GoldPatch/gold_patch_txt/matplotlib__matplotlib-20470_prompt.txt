# 修复代码生成提示词（实例ID：matplotlib__matplotlib-20470）
## 代码仓库
matplotlib/matplotlib

## 原始问题描述
Handle and label not created for Text with label
### Bug report

**Bug summary**

Text accepts a `label` keyword argument but neither its handle nor its label is created and added to the legend.

**Code for reproduction**

```python
import matplotlib.pyplot as plt

x = [0, 10]
y = [0, 10]

fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)

ax.plot(x, y, label="line")
ax.text(x=2, y=5, s="text", label="label")

ax.legend()

plt.show()
```

**Actual outcome**

![t](https://user-images.githubusercontent.com/9297904/102268707-a4e97f00-3ee9-11eb-9bd9-cca098f69c29.png)

**Expected outcome**

I expect a legend entry for the text.

**Matplotlib version**
  * Matplotlib version: 3.3.3



## 参考黄金补丁（正确的修复方案）
diff --git a/lib/matplotlib/tests/test_legend.py b/lib/matplotlib/tests/test_legend.py
--- a/lib/matplotlib/tests/test_legend.py
+++ b/lib/matplotlib/tests/test_legend.py
@@ -493,6 +493,15 @@ def test_handler_numpoints():
     ax.legend(numpoints=0.5)
 
 
+def test_text_nohandler_warning():
+    """Test that Text artists with labels raise a warning"""
+    fig, ax = plt.subplots()
+    ax.text(x=0, y=0, s="text", label="label")
+    with pytest.warns(UserWarning) as record:
+        ax.legend()
+    assert len(record) == 1
+
+
 def test_empty_bar_chart_with_legend():
     """Test legend when bar chart is empty with a label."""
     # related to issue #13003. Calling plt.legend() should not