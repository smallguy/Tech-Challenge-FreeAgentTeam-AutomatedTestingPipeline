# 修复代码生成提示词（实例ID：scikit-learn__scikit-learn-13497）
## 代码仓库
scikit-learn/scikit-learn

## 原始问题描述
Comparing string to array in _estimate_mi
In ``_estimate_mi`` there is ``discrete_features == 'auto'`` but discrete features can be an array of indices or a boolean mask.
This will error in future versions of numpy.
Also this means we never test this function with discrete features != 'auto', it seems?


## 参考黄金补丁（正确的修复方案）
diff --git a/sklearn/feature_selection/tests/test_mutual_info.py b/sklearn/feature_selection/tests/test_mutual_info.py
--- a/sklearn/feature_selection/tests/test_mutual_info.py
+++ b/sklearn/feature_selection/tests/test_mutual_info.py
@@ -183,18 +183,26 @@ def test_mutual_info_options():
     X_csr = csr_matrix(X)
 
     for mutual_info in (mutual_info_regression, mutual_info_classif):
-        assert_raises(ValueError, mutual_info_regression, X_csr, y,
+        assert_raises(ValueError, mutual_info, X_csr, y,
                       discrete_features=False)
+        assert_raises(ValueError, mutual_info, X, y,
+                      discrete_features='manual')
+        assert_raises(ValueError, mutual_info, X_csr, y,
+                      discrete_features=[True, False, True])
+        assert_raises(IndexError, mutual_info, X, y,
+                      discrete_features=[True, False, True, False])
+        assert_raises(IndexError, mutual_info, X, y, discrete_features=[1, 4])
 
         mi_1 = mutual_info(X, y, discrete_features='auto', random_state=0)
         mi_2 = mutual_info(X, y, discrete_features=False, random_state=0)
-
-        mi_3 = mutual_info(X_csr, y, discrete_features='auto',
-                           random_state=0)
-        mi_4 = mutual_info(X_csr, y, discrete_features=True,
+        mi_3 = mutual_info(X_csr, y, discrete_features='auto', random_state=0)
+        mi_4 = mutual_info(X_csr, y, discrete_features=True, random_state=0)
+        mi_5 = mutual_info(X, y, discrete_features=[True, False, True],
                            random_state=0)
+        mi_6 = mutual_info(X, y, discrete_features=[0, 2], random_state=0)
 
         assert_array_equal(mi_1, mi_2)
         assert_array_equal(mi_3, mi_4)
+        assert_array_equal(mi_5, mi_6)
 
     assert not np.allclose(mi_1, mi_3)