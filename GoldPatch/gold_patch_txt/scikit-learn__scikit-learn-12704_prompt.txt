# 修复代码生成提示词（实例ID：scikit-learn__scikit-learn-12704）
## 代码仓库
scikit-learn/scikit-learn

## 原始问题描述
regression in ColumnTransformer in in 0.20.1 with columns=pd.Index
```python
from sklearn.preprocessing import OneHotEncoder
ct = make_column_transformer((cat_features, OneHotEncoder(sparse=False)),
                             remainder=StandardScaler())
ct.transformers
```
```pytb
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-3-9232f2ef5d81> in <module>()
      6 
      7 ct = make_column_transformer((cat_features, OneHotEncoder(sparse=False)),
----> 8                              remainder=StandardScaler())
      9 ct.transformers

~/checkout/scikit-learn/sklearn/compose/_column_transformer.py in make_column_transformer(*transformers, **kwargs)
    819         raise TypeError('Unknown keyword arguments: "{}"'
    820                         .format(list(kwargs.keys())[0]))
--> 821     transformer_list = _get_transformer_list(transformers)
    822     return ColumnTransformer(transformer_list, n_jobs=n_jobs,
    823                              remainder=remainder,

~/checkout/scikit-learn/sklearn/compose/_column_transformer.py in _get_transformer_list(estimators)
    735 
    736     # XXX Remove in v0.22
--> 737     if _is_deprecated_tuple_order(estimators):
    738         transformers, columns = columns, transformers
    739         warnings.warn(message, DeprecationWarning)

~/checkout/scikit-learn/sklearn/compose/_column_transformer.py in _is_deprecated_tuple_order(tuples)
    714     """
    715     transformers, columns = zip(*tuples)
--> 716     if (not _validate_transformers(transformers)
    717             and _validate_transformers(columns)):
    718         return True

~/checkout/scikit-learn/sklearn/compose/_column_transformer.py in _validate_transformers(transformers)
    693 
    694     for t in transformers:
--> 695         if t in ('drop', 'passthrough'):
    696             continue
    697         if (not (hasattr(t, "fit") or hasattr(t, "fit_transform")) or not

ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()
```

This came up in one of my teaching notebooks actually (and might be in my book as well).
This is very natural because columns are of type pd.Index, and so if you take some subset of columns from ``DataFrame.columns`` you'll now run into this error.
So... 0.20.2? 


## 参考黄金补丁（正确的修复方案）
diff --git a/sklearn/compose/tests/test_column_transformer.py b/sklearn/compose/tests/test_column_transformer.py
--- a/sklearn/compose/tests/test_column_transformer.py
+++ b/sklearn/compose/tests/test_column_transformer.py
@@ -541,6 +541,20 @@ def test_make_column_transformer():
                                 ('first', 'drop'))
 
 
+def test_make_column_transformer_pandas():
+    pd = pytest.importorskip('pandas')
+    X_array = np.array([[0, 1, 2], [2, 4, 6]]).T
+    X_df = pd.DataFrame(X_array, columns=['first', 'second'])
+    norm = Normalizer()
+    # XXX remove in v0.22
+    with pytest.warns(DeprecationWarning,
+                      match='`make_column_transformer` now expects'):
+        ct1 = make_column_transformer((X_df.columns, norm))
+    ct2 = make_column_transformer((norm, X_df.columns))
+    assert_almost_equal(ct1.fit_transform(X_df),
+                        ct2.fit_transform(X_df))
+
+
 def test_make_column_transformer_kwargs():
     scaler = StandardScaler()
     norm = Normalizer()