# 修复代码生成提示词（实例ID：astropy__astropy-14528）
## 代码仓库
astropy/astropy

## 原始问题描述
`io.fits` creates a corrupt FITS files if a `ImageHDU` contains zero-dimensional data
### Description

`ImageHDU` accepts a ndarray with shape `()` (zero-dimensional) as a data array. This later causes issues when writing to a file because `io.fits` assumes that the data has at least 1 dimension, resulting in a corrupt FITS file.

### Expected behavior

`io.fits` should never silently create a corrupt FITS file.

### How to Reproduce

Minimal reproducible example:

```python
import numpy as np
from astropy.io import fits

filename = 'corrupted.fits'
hdu = fits.ImageHDU(name='test', data=np.array(1.0))
hdu.writeto(filename, overwrite=True)
```
Although this causes no errors/warnings, the resulting file is not valid FITS and will fail to properly open with `fits.getdata(filename)`.

### Versions

Windows-10-10.0.19044-SP0
Python 3.10.10 (tags/v3.10.10:aad5f6a, Feb  7 2023, 17:20:36) [MSC v.1929 64 bit (AMD64)]
astropy 5.2.1
Numpy 1.24.2
pyerfa 2.0.0.1
Scipy 1.10.0
Matplotlib 3.6.3


## 参考黄金补丁（正确的修复方案）
diff --git a/astropy/io/fits/tests/test_hdulist.py b/astropy/io/fits/tests/test_hdulist.py
--- a/astropy/io/fits/tests/test_hdulist.py
+++ b/astropy/io/fits/tests/test_hdulist.py
@@ -547,11 +547,14 @@ def test_new_hdulist_extend_keyword(self):
 
         h0 = fits.Header()
         hdu = fits.PrimaryHDU(header=h0)
-        sci = fits.ImageHDU(data=np.array(10))
-        image = fits.HDUList([hdu, sci])
-        image.writeto(self.temp("temp.fits"))
+        sci = fits.ImageHDU(data=np.array([10]))
+        hdul = fits.HDUList([hdu, sci])
         assert "EXTEND" in hdu.header
         assert hdu.header["EXTEND"] is True
+        hdul.writeto(self.temp("temp.fits"))
+        hdr = fits.getheader(self.temp("temp.fits"))
+        assert "EXTEND" in hdr
+        assert hdr["EXTEND"] is True
 
     def test_replace_memmaped_array(self, home_is_temp):
         # Copy the original before we modify it
diff --git a/astropy/io/fits/tests/test_image.py b/astropy/io/fits/tests/test_image.py
--- a/astropy/io/fits/tests/test_image.py
+++ b/astropy/io/fits/tests/test_image.py
@@ -1126,6 +1126,11 @@ def test_hdu_creation_with_scalar(self):
             fits.ImageHDU(data=1)
         with pytest.raises(TypeError, match=msg):
             fits.PrimaryHDU(data=1)
+        # Regression test for https://github.com/astropy/astropy/issues/14527
+        with pytest.raises(TypeError, match=msg):
+            fits.ImageHDU(data=np.array(1))
+        with pytest.raises(TypeError, match=msg):
+            fits.PrimaryHDU(data=np.array(1))
 
 
 class TestCompressedImage(FitsTestCase):