# 修复代码生成提示词（实例ID：sphinx-doc__sphinx-10137）
## 代码仓库
sphinx-doc/sphinx

## 原始问题描述
Allow to bail out extlink replacement suggestion
Feature added via https://github.com/sphinx-doc/sphinx/pull/9800. Consider the following ext link:
```
# conf.py
extlinks = {
    "user": ("https://github.com/%s", "@"),
}
```
and the following text:
```
All pull requests and merges to the ``main`` branch are tested using `GitHub Actions <https://github.com/features/actions>`_ .
````

```
hardcoded link 'https://github.com/features/actions' could be replaced by an extlink (try using ':user:`features/actions`' instead)
```

Can we somehow bailout out the check here, or perhaps the suggestion should only apply if there's no `/` in the extlink, @tk0miya what do you think? cc @hoefling



## 参考黄金补丁（正确的修复方案）
diff --git a/tests/roots/test-ext-extlinks-hardcoded-urls-multiple-replacements/index.rst b/tests/roots/test-ext-extlinks-hardcoded-urls-multiple-replacements/index.rst
--- a/tests/roots/test-ext-extlinks-hardcoded-urls-multiple-replacements/index.rst
+++ b/tests/roots/test-ext-extlinks-hardcoded-urls-multiple-replacements/index.rst
@@ -17,6 +17,8 @@ https://github.com/octocat
 
 `replaceable link`_
 
+`non replaceable link <https://github.com/sphinx-doc/sphinx/pulls>`_
+
 .. hyperlinks
 
 .. _replaceable link: https://github.com/octocat
diff --git a/tests/test_ext_extlinks.py b/tests/test_ext_extlinks.py
--- a/tests/test_ext_extlinks.py
+++ b/tests/test_ext_extlinks.py
@@ -28,6 +28,7 @@ def test_all_replacements_suggested_if_multiple_replacements_possible(app, warni
     app.build()
     warning_output = warning.getvalue()
     # there should be six warnings for replaceable URLs, three pairs per link
+    assert warning_output.count("WARNING: hardcoded link") == 6
     message = (
         "index.rst:%d: WARNING: hardcoded link 'https://github.com/octocat' "
         "could be replaced by an extlink (try using '%s' instead)"