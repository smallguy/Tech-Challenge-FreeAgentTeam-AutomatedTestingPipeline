# 修复代码生成提示词（实例ID：django__django-14539）
## 代码仓库
django/django

## 原始问题描述
urlize() does not handle html escaped string and trailing punctuation correctly
Description
	
Example:
urlize('Search for google.com/?q=1&lt! and see.')
# expected output
'Search for <a href="http://google.com/?q=1%3C">google.com/?q=1&lt</a>! and see.'
# actual output
'Search for <a href="http://google.com/?q=1%3C">google.com/?q=1&lt</a>lt! and see.'


## 参考黄金补丁（正确的修复方案）
diff --git a/tests/utils_tests/test_html.py b/tests/utils_tests/test_html.py
--- a/tests/utils_tests/test_html.py
+++ b/tests/utils_tests/test_html.py
@@ -250,6 +250,10 @@ def test_urlize(self):
                 'Search for google.com/?q=! and see.',
                 'Search for <a href="http://google.com/?q=">google.com/?q=</a>! and see.'
             ),
+            (
+                'Search for google.com/?q=1&lt! and see.',
+                'Search for <a href="http://google.com/?q=1%3C">google.com/?q=1&lt</a>! and see.'
+            ),
             (
                 lazystr('Search for google.com/?q=!'),
                 'Search for <a href="http://google.com/?q=">google.com/?q=</a>!'