# 修复代码生成提示词（实例ID：sympy__sympy-12428）
## 代码仓库
sympy/sympy

## 原始问题描述
DiagonalMatrix[i, j] -> 0
Similar to #12300, DiagonalMatrix references to position (i,j) give 0:

```
>>> d = DiagonalMatrix(MatrixSymbol('x', 3, 3))
>>> d[i,j]
0
```


## 参考黄金补丁（正确的修复方案）
diff --git a/sympy/matrices/expressions/tests/test_diagonal.py b/sympy/matrices/expressions/tests/test_diagonal.py
--- a/sympy/matrices/expressions/tests/test_diagonal.py
+++ b/sympy/matrices/expressions/tests/test_diagonal.py
@@ -3,15 +3,22 @@
 from sympy import Symbol, ask, Q
 
 n = Symbol('n')
-x = MatrixSymbol('x', n, 1)
 X = MatrixSymbol('X', n, n)
-D = DiagonalMatrix(x)
+D = DiagonalMatrix(X)
 d = DiagonalOf(X)
 
 def test_DiagonalMatrix():
     assert D.shape == (n, n)
     assert D[1, 2] == 0
-    assert D[1, 1] == x[1, 0]
+    assert D[1, 1] == X[1, 1]
+    i = Symbol('i')
+    j = Symbol('j')
+    x = MatrixSymbol('x', 3, 3)
+    ij = DiagonalMatrix(x)[i, j]
+    assert ij != 0
+    assert ij.subs({i:0, j:0}) == x[0, 0]
+    assert ij.subs({i:0, j:1}) == 0
+    assert ij.subs({i:1, j:1}) == x[1, 1]
 
 def test_DiagonalMatrix_Assumptions():
     assert ask(Q.diagonal(D))