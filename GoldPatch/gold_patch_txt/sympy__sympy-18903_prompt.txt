# 修复代码生成提示词（实例ID：sympy__sympy-18903）
## 代码仓库
sympy/sympy

## 原始问题描述
Nested floor and ceiling don't fully evaluate
```
>>> floor(floor(x) + 1) + x
x + floor(floor(x)) + 1
>>> x + floor(floor(x)) + 1
x + floor(x) + 1
```

Same idea with `ceiling`.


## 参考黄金补丁（正确的修复方案）
diff --git a/sympy/functions/elementary/tests/test_integers.py b/sympy/functions/elementary/tests/test_integers.py
--- a/sympy/functions/elementary/tests/test_integers.py
+++ b/sympy/functions/elementary/tests/test_integers.py
@@ -561,6 +561,10 @@ def test_nested_floor_ceiling():
     assert floor(ceiling(-floor(x**Rational(7, 2)/y))) == -floor(x**Rational(7, 2)/y)
     assert -ceiling(-ceiling(floor(x)/y)) == ceiling(floor(x)/y)
 
+def test_issue_18689():
+    assert floor(floor(floor(x)) + 3) == floor(x) + 3
+    assert ceiling(ceiling(ceiling(x)) + 1) == ceiling(x) + 1
+    assert ceiling(ceiling(floor(x)) + 3) == floor(x) + 3
 
 def test_issue_18421():
     assert floor(float(0)) is S.Zero