# 修复代码生成提示词（实例ID：matplotlib__matplotlib-22767）
## 代码仓库
matplotlib/matplotlib

## 原始问题描述
[Bug]: Issue with find_nearest_contour in contour.py
### Bug summary

The default for the indices keyword in the find_nearest_contour function within countour.py is defined incorrectly in the code.  Line 1377 should be "indices = range(len(self.layers))" instead of "indices = range(len(self.levels))."

### Code for reproduction

```python
import numpy as np
import matplotlib.pyplot as plt
xy=np.indices((100,100))
img=np.exp(-np.pi*(np.sum((xy-50)**2,0)/20.**2))
cs=plt.contourf(img,50)
cs.find_nearest_contour(20,20,pixel=False)
```


### Actual outcome

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/site-packages/matplotlib/contour.py", line 1388, in find_nearest_contour
    con = self.collections[icon]
IndexError: list index out of range

### Expected outcome

(0, 0, 397, 23.68976612821045, 14.034856810732212, 49.197307349357025)

### Additional information

_No response_

### Operating system

Mac OS 12.3.1

### Matplotlib Version

3.5.1

### Matplotlib Backend

TkAgg

### Python version

3.8.12

### Jupyter version

_No response_

### Installation

pip


## 参考黄金补丁（正确的修复方案）
diff --git a/lib/matplotlib/tests/test_contour.py b/lib/matplotlib/tests/test_contour.py
--- a/lib/matplotlib/tests/test_contour.py
+++ b/lib/matplotlib/tests/test_contour.py
@@ -470,6 +470,48 @@ def test_contour_line_start_on_corner_edge():
     cbar.add_lines(lines)
 
 
+def test_find_nearest_contour():
+    xy = np.indices((15, 15))
+    img = np.exp(-np.pi * (np.sum((xy - 5)**2, 0)/5.**2))
+    cs = plt.contour(img, 10)
+
+    nearest_contour = cs.find_nearest_contour(1, 1, pixel=False)
+    expected_nearest = (1, 0, 33, 1.965966, 1.965966, 1.866183)
+    assert_array_almost_equal(nearest_contour, expected_nearest)
+
+    nearest_contour = cs.find_nearest_contour(8, 1, pixel=False)
+    expected_nearest = (1, 0, 5, 7.550173, 1.587542, 0.547550)
+    assert_array_almost_equal(nearest_contour, expected_nearest)
+
+    nearest_contour = cs.find_nearest_contour(2, 5, pixel=False)
+    expected_nearest = (3, 0, 21, 1.884384, 5.023335, 0.013911)
+    assert_array_almost_equal(nearest_contour, expected_nearest)
+
+    nearest_contour = cs.find_nearest_contour(2, 5,
+                                              indices=(5, 7),
+                                              pixel=False)
+    expected_nearest = (5, 0, 16, 2.628202, 5.0, 0.394638)
+    assert_array_almost_equal(nearest_contour, expected_nearest)
+
+
+def test_find_nearest_contour_no_filled():
+    xy = np.indices((15, 15))
+    img = np.exp(-np.pi * (np.sum((xy - 5)**2, 0)/5.**2))
+    cs = plt.contourf(img, 10)
+
+    with pytest.raises(ValueError,
+                       match="Method does not support filled contours."):
+        cs.find_nearest_contour(1, 1, pixel=False)
+
+    with pytest.raises(ValueError,
+                       match="Method does not support filled contours."):
+        cs.find_nearest_contour(1, 10, indices=(5, 7), pixel=False)
+
+    with pytest.raises(ValueError,
+                       match="Method does not support filled contours."):
+        cs.find_nearest_contour(2, 5, indices=(2, 7), pixel=True)
+
+
 @mpl.style.context("default")
 def test_contour_autolabel_beyond_powerlimits():
     ax = plt.figure().add_subplot()