# 修复代码生成提示词（实例ID：django__django-16053）
## 代码仓库
django/django

## 原始问题描述
ContentTypes and Permissions mix English with other languages in __str__
Description
	
The string representation of django.contrib.contenttypes.models.ContentType and django.contrib.auth.models.Permission was changed in commit ​48c17807 to solve #16027. However, the __str__ function mixes the model’s app_label (which is not localized) with the model’s verbose_name (which is localized). This results in weirdly looking strings, part of which is in English and part in a different language, and maybe even different alphabet. 
The comment https://code.djangoproject.com/ticket/16027#comment:21 does not clarify why the application’s app_label was chosen and not verbose_name (via self._meta.apps.get_app_config(self.app_label).verbose_name). In my opinion, either the whole of the ContentType’s representation should use localized labels or none of them should be localized.


## 参考黄金补丁（正确的修复方案）
diff --git a/tests/auth_tests/test_models.py b/tests/auth_tests/test_models.py
--- a/tests/auth_tests/test_models.py
+++ b/tests/auth_tests/test_models.py
@@ -587,5 +587,5 @@ class PermissionTests(TestCase):
     def test_str(self):
         p = Permission.objects.get(codename="view_customemailfield")
         self.assertEqual(
-            str(p), "auth_tests | custom email field | Can view custom email field"
+            str(p), "Auth_Tests | custom email field | Can view custom email field"
         )
diff --git a/tests/contenttypes_tests/test_models.py b/tests/contenttypes_tests/test_models.py
--- a/tests/contenttypes_tests/test_models.py
+++ b/tests/contenttypes_tests/test_models.py
@@ -280,7 +280,11 @@ def test_missing_model_with_existing_model_name(self):
 
     def test_str(self):
         ct = ContentType.objects.get(app_label="contenttypes_tests", model="site")
-        self.assertEqual(str(ct), "contenttypes_tests | site")
+        self.assertEqual(str(ct), "Contenttypes_Tests | site")
+
+    def test_str_auth(self):
+        ct = ContentType.objects.get(app_label="auth", model="group")
+        self.assertEqual(str(ct), "Authentication and Authorization | group")
 
     def test_name(self):
         ct = ContentType.objects.get(app_label="contenttypes_tests", model="site")
@@ -288,7 +292,7 @@ def test_name(self):
 
     def test_app_labeled_name(self):
         ct = ContentType.objects.get(app_label="contenttypes_tests", model="site")
-        self.assertEqual(ct.app_labeled_name, "contenttypes_tests | site")
+        self.assertEqual(ct.app_labeled_name, "Contenttypes_Tests | site")
 
     def test_name_unknown_model(self):
         ct = ContentType(app_label="contenttypes_tests", model="unknown")
diff --git a/tests/i18n/contenttypes/tests.py b/tests/i18n/contenttypes/tests.py
--- a/tests/i18n/contenttypes/tests.py
+++ b/tests/i18n/contenttypes/tests.py
@@ -20,6 +20,6 @@ class ContentTypeTests(TestCase):
     def test_verbose_name(self):
         company_type = ContentType.objects.get(app_label="i18n", model="company")
         with translation.override("en"):
-            self.assertEqual(str(company_type), "i18n | Company")
+            self.assertEqual(str(company_type), "I18N | Company")
         with translation.override("fr"):
-            self.assertEqual(str(company_type), "i18n | Société")
+            self.assertEqual(str(company_type), "I18N | Société")
diff --git a/tests/multiple_database/tests.py b/tests/multiple_database/tests.py
--- a/tests/multiple_database/tests.py
+++ b/tests/multiple_database/tests.py
@@ -1118,7 +1118,7 @@ def test_generic_key_cross_database_protection(self):
 
         # Set a foreign key with an object from a different database
         msg = (
-            'Cannot assign "<ContentType: multiple_database | book>": the '
+            'Cannot assign "<ContentType: Multiple_Database | book>": the '
             "current database router prevents this relation."
         )
         with self.assertRaisesMessage(ValueError, msg):