# 修复代码生成提示词（实例ID：django__django-16046）
## 代码仓库
django/django

## 原始问题描述
Fix numberformat.py "string index out of range" when null
Description
	
When:
if str_number[0] == "-"
encounters a number field that's null when formatting for the admin list_display this causes an 
IndexError: string index out of range
I can attach the proposed fix here, or open a pull request on GitHub if you like?


## 参考黄金补丁（正确的修复方案）
diff --git a/tests/utils_tests/test_numberformat.py b/tests/utils_tests/test_numberformat.py
--- a/tests/utils_tests/test_numberformat.py
+++ b/tests/utils_tests/test_numberformat.py
@@ -172,3 +172,7 @@ def __format__(self, specifier, **kwargs):
 
         price = EuroDecimal("1.23")
         self.assertEqual(nformat(price, ","), "€ 1,23")
+
+    def test_empty(self):
+        self.assertEqual(nformat("", "."), "")
+        self.assertEqual(nformat(None, "."), "None")