# 修复代码生成提示词（实例ID：astropy__astropy-13734）
## 代码仓库
astropy/astropy

## 原始问题描述
Add option to input/output column units for fixed width tables
Extend the `io.ascii.FixedWidth` reader to include a keyword arg that will specify that there is a row of unit specifiers after the column name specifiers (or at the top of the header if there are no column names).  This will apply for both reading and writing fixed width tables.

This allows for outputting a table to a file in a format like `Table.pprint` with `show_units=True`, and then reading back that table with no information loss.



## 参考黄金补丁（正确的修复方案）
diff --git a/astropy/io/ascii/tests/test_fixedwidth.py b/astropy/io/ascii/tests/test_fixedwidth.py
--- a/astropy/io/ascii/tests/test_fixedwidth.py
+++ b/astropy/io/ascii/tests/test_fixedwidth.py
@@ -498,3 +498,46 @@ def test_fixedwidthnoheader_splitting():
     assert np.all(dat['a'] == [1, 4])
     assert np.all(dat['b'] == [2, 5])
     assert np.all(dat['c'] == [3, 6])
+
+
+def test_fixed_width_header_rows():
+    tbl = [
+        '| int16 | float32 |      <U3 | int64 |',
+        '|     a |       b |        c |     d |',
+        '|     m |         |          | m / s |',
+        '|       |     .2f |          |       |',
+        '|       |         | C column |       |',
+        '|     1 |    1.00 |        c |     4 |',
+        '|     2 |    2.00 |        d |     5 |',
+        '|     3 |    3.00 |        e |     6 |'
+    ]
+    header_rows = ["dtype", "name", "unit", "format", "description"]
+    dat = ascii.read(tbl, format='fixed_width', delimiter='|', header_rows=header_rows)
+    out = StringIO()
+    ascii.write(dat, out, format='fixed_width', delimiter='|', header_rows=header_rows)
+    assert out.getvalue().splitlines() == tbl
+
+
+def test_fixed_width_two_line_header_rows():
+    tbl = [
+        'int32 float32      <U2 int64',
+        '    m                  m / s',
+        '          .2f               ',
+        '              C column      ',
+        '    a       b        c     d',
+        '----- ------- -------- -----',
+        '    1    1.00        c     4',
+        '    2    2.00        d     5',
+        '    3    3.00        e     6'
+    ]
+    header_rows = ["dtype", "unit", "format", "description", "name"]
+    dat = ascii.read(tbl, format='fixed_width_two_line', header_rows=header_rows)
+    out = StringIO()
+    ascii.write(dat, out, format='fixed_width_two_line', header_rows=header_rows)
+    assert out.getvalue().splitlines() == tbl
+
+
+def test_fixed_width_no_header_header_rows():
+    tbl = ['    1    1.00        c     4']
+    with pytest.raises(TypeError, match=r"unexpected keyword argument 'header_rows'"):
+        ascii.read(tbl, format='fixed_width_no_header', header_rows=["unit"])