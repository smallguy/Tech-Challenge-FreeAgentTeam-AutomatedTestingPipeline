# 修复代码生成提示词（实例ID：pytest-dev__pytest-8952）
## 代码仓库
pytest-dev/pytest

## 原始问题描述
Enhance `RunResult` warning assertion capabilities
while writing some other bits and pieces, I had a use case for checking the `warnings` omitted, `RunResult` has a `assert_outcomes()` that doesn't quite offer `warnings=` yet the information is already available in there, I suspect there is a good reason why we don't have `assert_outcomes(warnings=...)` so I propose some additional capabilities on `RunResult` to handle warnings in isolation.

With `assert_outcomes()` the full dict comparison may get a bit intrusive as far as warning capture is concerned.

something simple like:

```python
result = pytester.runpytest(...)
result.assert_warnings(count=1)
```

Thoughts?


## 参考黄金补丁（正确的修复方案）
diff --git a/testing/test_nose.py b/testing/test_nose.py
--- a/testing/test_nose.py
+++ b/testing/test_nose.py
@@ -335,7 +335,7 @@ def test_failing():
         """
     )
     result = pytester.runpytest(p)
-    result.assert_outcomes(skipped=1)
+    result.assert_outcomes(skipped=1, warnings=1)
 
 
 def test_SkipTest_in_test(pytester: Pytester) -> None:
diff --git a/testing/test_pytester.py b/testing/test_pytester.py
--- a/testing/test_pytester.py
+++ b/testing/test_pytester.py
@@ -847,3 +847,17 @@ def test_testdir_makefile_ext_empty_string_makes_file(testdir) -> None:
     """For backwards compat #8192"""
     p1 = testdir.makefile("", "")
     assert "test_testdir_makefile" in str(p1)
+
+
+@pytest.mark.filterwarnings("default")
+def test_pytester_assert_outcomes_warnings(pytester: Pytester) -> None:
+    pytester.makepyfile(
+        """
+        import warnings
+
+        def test_with_warning():
+            warnings.warn(UserWarning("some custom warning"))
+        """
+    )
+    result = pytester.runpytest()
+    result.assert_outcomes(passed=1, warnings=1)