# 修复代码生成提示词（实例ID：sphinx-doc__sphinx-8679）
## 代码仓库
sphinx-doc/sphinx

## 原始问题描述
reference pointing at a "rubric" directive containing a ``quoted`` part breaks
**Describe the bug**
The reference text is broken when trying to display a reference pointing at a "rubric" directive containing a part that is ``quoted``. However, a title with a quoted text is rightfully displayed by a reference

```
.. _reference:

.. rubric:: This rubric will be a ``broken`` reference


Let's call the :ref:`reference`
```

Will result in:

![image](https://user-images.githubusercontent.com/29931397/103542950-0758ee00-4e9e-11eb-9a7c-9a7e677366a5.png)


**To Reproduce**

Just use a [rubric ](https://www.sphinx-doc.org/en/master/usage/restructuredtext/directives.html#directive-rubric) directive with a quoted text in it, as shown below:
https://arthurdherbemont.gitlab.io/sphinx-rubric-issue/
from https://gitlab.com/ArthurdHerbemont/sphinx-rubric-issue

**Expected behavior**
Text displayed by the reference should be displayed entirely

**Your project**
https://gitlab.com/ArthurdHerbemont/sphinx-rubric-issue

https://arthurdherbemont.gitlab.io/sphinx-rubric-issue/

**Environment info**
- OS: alpine linux
- Python version: 3.7
- Sphinx version: v3.4.1





## 参考黄金补丁（正确的修复方案）
diff --git a/tests/test_domain_std.py b/tests/test_domain_std.py
--- a/tests/test_domain_std.py
+++ b/tests/test_domain_std.py
@@ -412,3 +412,13 @@ def test_disabled_docref(app):
     assert_node(doctree, ([nodes.paragraph, ([pending_xref, nodes.inline, "index"],
                                              "\n",
                                              [nodes.inline, "index"])],))
+
+
+def test_labeled_rubric(app):
+    text = (".. _label:\n"
+            ".. rubric:: blah *blah* blah\n")
+    restructuredtext.parse(app, text)
+
+    domain = app.env.get_domain("std")
+    assert 'label' in domain.labels
+    assert domain.labels['label'] == ('index', 'label', 'blah blah blah')