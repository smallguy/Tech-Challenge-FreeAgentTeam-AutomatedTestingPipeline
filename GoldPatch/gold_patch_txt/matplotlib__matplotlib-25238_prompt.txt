# 修复代码生成提示词（实例ID：matplotlib__matplotlib-25238）
## 代码仓库
matplotlib/matplotlib

## 原始问题描述
[MNT]: FFMpegWriter does not check if out path exists when initialized. 
### Summary

FFMpegWriter does not ensure the outputpath exists when initialized ([here](https://github.com/matplotlib/matplotlib/blob/6a9a07155c0e7f91c20dd4c7e280198ec652c4ae/lib/matplotlib/animation.py#L196)). This leads to a broken pipe error with no mention of a non-existent path which can be misleading to the user.

### Proposed fix

When setup is called, check the output path exists and if not, throw an error to inform the user.


## 参考黄金补丁（正确的修复方案）
diff --git a/lib/matplotlib/tests/test_animation.py b/lib/matplotlib/tests/test_animation.py
--- a/lib/matplotlib/tests/test_animation.py
+++ b/lib/matplotlib/tests/test_animation.py
@@ -506,3 +506,13 @@ def test_disable_cache_warning(anim):
         )
     assert anim._cache_frame_data is False
     anim._init_draw()
+
+
+def test_movie_writer_invalid_path(anim):
+    if sys.platform == "win32":
+        match_str = re.escape("[WinError 3] The system cannot find the path specified:")
+    else:
+        match_str = re.escape("[Errno 2] No such file or directory: '/foo")
+    with pytest.raises(FileNotFoundError, match=match_str):
+        _ = anim.save("/foo/bar/aardvark/thiscannotreallyexist.mp4",
+                      writer=animation.FFMpegFileWriter())