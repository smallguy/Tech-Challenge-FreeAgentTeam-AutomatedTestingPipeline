# 修复代码生成提示词（实例ID：sympy__sympy-18130）
## 代码仓库
sympy/sympy

## 原始问题描述
ImageSet of n**2-1 returns EmptySet as intersection with Integers (diophantine bug)
```
In [1]: ImageSet(Lambda(n, n**2 - 1), S.Integers).intersect(S.Integers)
Out[1]: ∅
```


## 参考黄金补丁（正确的修复方案）
diff --git a/sympy/solvers/tests/test_diophantine.py b/sympy/solvers/tests/test_diophantine.py
--- a/sympy/solvers/tests/test_diophantine.py
+++ b/sympy/solvers/tests/test_diophantine.py
@@ -540,6 +540,12 @@ def test_diophantine():
     assert diophantine(x**2 + y**2 +3*x- 5, permute=True) == \
         set([(-1, 1), (-4, -1), (1, -1), (1, 1), (-4, 1), (-1, -1), (4, 1), (4, -1)])
 
+    # issue 18122
+    assert check_solutions(x**2-y)
+    assert check_solutions(y**2-x)
+    assert diophantine((x**2-y), t) == set([(t, t**2)])
+    assert diophantine((y**2-x), t) == set([(t**2, -t)])
+
 
 def test_general_pythagorean():
     from sympy.abc import a, b, c, d, e