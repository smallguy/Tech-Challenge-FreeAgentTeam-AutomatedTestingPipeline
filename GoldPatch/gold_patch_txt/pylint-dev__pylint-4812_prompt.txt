# 修复代码生成提示词（实例ID：pylint-dev__pylint-4812）
## 代码仓库
pylint-dev/pylint

## 原始问题描述
Config File Does not Expand Environment Variables
If a config file is provided that has an environment variable, such as "%AppData%", it fails.
This can be fixed by changing [this line](https://github.com/PyCQA/pylint/blob/master/pylint/config/option_manager_mixin.py#L259) from `config_file = os.path.expanduser(config_file)` to `config_file = os.path.expandvars(os.path.expanduser(config_file))`





## 参考黄金补丁（正确的修复方案）
diff --git a/tests/test_config.py b/tests/test_config.py
--- a/tests/test_config.py
+++ b/tests/test_config.py
@@ -1,7 +1,11 @@
 # pylint: disable=missing-module-docstring, missing-function-docstring, protected-access
+import os
 import unittest.mock
 
+import pytest
+
 import pylint.lint
+from pylint.config import OptionsManagerMixIn
 
 
 def check_configuration_file_reader(config_file):
@@ -91,3 +95,31 @@ def test_can_read_toml_rich_types(tmp_path):
 """
     )
     check_configuration_file_reader(config_file)
+
+
+def test_can_read_env_variable(tmp_path):
+    # Check that we can read the "regular" INI .pylintrc file
+    # if it has an environment variable.
+    config_file = tmp_path / "pyproject.toml"
+    config_file.write_text(
+        """
+[tool.pylint."messages control"]
+disable = "logging-not-lazy,logging-format-interpolation"
+jobs = "10"
+reports = "yes"
+"""
+    )
+    os.environ["tmp_path_env"] = str(tmp_path / "pyproject.toml")
+    options_manager_mix_in = OptionsManagerMixIn("", "${tmp_path_env}")
+    options_manager_mix_in.read_config_file("${tmp_path_env}")
+
+    def test_read_config_file():
+        with pytest.raises(OSError):
+            options_manager_mix_in.read_config_file("${tmp_path_en}")
+
+    test_read_config_file()
+    options_manager_mix_in.load_config_file()
+    section = options_manager_mix_in.cfgfile_parser.sections()[0]
+    jobs, jobs_nr = options_manager_mix_in.cfgfile_parser.items(section)[1]
+    assert jobs == "jobs"
+    assert jobs_nr == "10"