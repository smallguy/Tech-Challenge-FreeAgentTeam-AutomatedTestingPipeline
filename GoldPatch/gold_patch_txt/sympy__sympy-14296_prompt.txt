# 修复代码生成提示词（实例ID：sympy__sympy-14296）
## 代码仓库
sympy/sympy

## 原始问题描述
Sign of generator of an algebraic numberfield
`AlgebraicField` calls [`to_number_field`](https://github.com/sympy/sympy/blob/master/sympy/polys/domains/algebraicfield.py#L33) in order to create an `AlgebraicNumber` generating the extension field. This number is chosen positive in some cases where the sign can be determined.  This choice is currently implemented, at least in part, when the algebraic number is [created](https://github.com/sympy/sympy/blob/master/sympy/core/numbers.py#L2390), but the implementation is defective as it does not change the minimal polynomial.
```
>>> b = 1 - sqrt(2)
>>> a = to_number_field(b)
>>> a
-1 + sqrt(2)  # positive generator created
>>> minimal_polynomial(b)
_x**2 - 2*_x - 1  # this is correct
>>> minimal_polynomial(a)
_x**2 - 2*_x - 1  # but this is wrong, apparently copied from a.minpoly
>>> a.minpoly
PurePoly(_x**2 - 2*_x - 1, _x, domain='QQ')
>>> minimal_polynomial(-1 + sqrt(2))
_x**2 + 2*_x - 1  # this is the correct minimal polynomial of a
```
I think this could be fixed in two ways:
* Add code to create the changed minimal polynomial.
* Ignore the sign and remove the code changing it.

I am inclined to prefer the latter, simpler solution, but I would also like to hear other suggestions.


## 参考黄金补丁（正确的修复方案）
diff --git a/sympy/core/tests/test_numbers.py b/sympy/core/tests/test_numbers.py
--- a/sympy/core/tests/test_numbers.py
+++ b/sympy/core/tests/test_numbers.py
@@ -582,6 +582,15 @@ def test_Float_issue_2107():
     assert S.Zero + b + (-b) == 0
 
 
+def test_issue_14289():
+    from sympy.polys.numberfields import to_number_field
+
+    a = 1 - sqrt(2)
+    b = to_number_field(a)
+    assert b.as_expr() == a
+    assert b.minpoly(a).expand() == 0
+
+
 def test_Float_from_tuple():
     a = Float((0, '1L', 0, 1))
     b = Float((0, '1', 0, 1))
diff --git a/sympy/polys/tests/test_numberfields.py b/sympy/polys/tests/test_numberfields.py
--- a/sympy/polys/tests/test_numberfields.py
+++ b/sympy/polys/tests/test_numberfields.py
@@ -591,7 +591,7 @@ def test_AlgebraicNumber():
     assert a.is_aliased is False
 
     assert AlgebraicNumber( sqrt(3)).rep == DMP([ QQ(1), QQ(0)], QQ)
-    assert AlgebraicNumber(-sqrt(3)).rep == DMP([-QQ(1), QQ(0)], QQ)
+    assert AlgebraicNumber(-sqrt(3)).rep == DMP([ QQ(1), QQ(0)], QQ)
 
     a = AlgebraicNumber(sqrt(2))
     b = AlgebraicNumber(sqrt(2))