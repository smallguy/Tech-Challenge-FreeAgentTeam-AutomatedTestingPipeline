# 修复代码生成提示词（实例ID：sphinx-doc__sphinx-9987）
## 代码仓库
sphinx-doc/sphinx

## 原始问题描述
Using position-only parameter syntax in `__init__` prevents docstrings for attributes from being parsed
### Describe the bug

I'm currently using [position-only parameters](https://www.python.org/dev/peps/pep-0570/) in most of my functions, including `__init__`, however this prevents inline, before, and after doc strings from being parsed.

### How to Reproduce

```
$ git clone https://github.com/bryanforbes/sphinx-positional-only-issue
$ cd sphinx-positional-only-issue
$ pip install -r requirements.txt
$ cd docs
$ make html
$ open _build/html/index.html
```

Once `index.html` is open, you will see that only `test.WithoutPositional` has the `a` property documented.

### Expected behavior

Both classes should have the `a` property documented

### Your project

https://github.com/bryanforbes/sphinx-positional-only-issue

### Screenshots

<img width="636" alt="image" src="https://user-images.githubusercontent.com/204106/145874239-8fca2943-1321-4098-b0d9-7c2ca81e1e18.png">

### OS

macOS 11.6.1

### Python version

3.10

### Sphinx version

4.3.1

### Sphinx extensions

sphinx.ext.autodoc, sphinx.ext.napoleon

### Extra tools

_No response_

### Additional context

_No response_


## 参考黄金补丁（正确的修复方案）
diff --git a/tests/test_pycode.py b/tests/test_pycode.py
--- a/tests/test_pycode.py
+++ b/tests/test_pycode.py
@@ -191,3 +191,18 @@ def test_ModuleAnalyzer_find_attr_docs():
                                  'Qux': 15,
                                  'Qux.attr1': 16,
                                  'Qux.attr2': 17}
+
+
+@pytest.mark.skipif(sys.version_info < (3, 8),
+                    reason='posonlyargs are available since python3.8.')
+def test_ModuleAnalyzer_find_attr_docs_for_posonlyargs_method():
+    code = ('class Foo(object):\n'
+            '    def __init__(self, /):\n'
+            '       self.attr = None  #: attribute comment\n')
+    analyzer = ModuleAnalyzer.for_string(code, 'module')
+    docs = analyzer.find_attr_docs()
+    assert set(docs) == {('Foo', 'attr')}
+    assert docs[('Foo', 'attr')] == ['attribute comment', '']
+    assert analyzer.tagorder == {'Foo': 0,
+                                 'Foo.__init__': 1,
+                                 'Foo.attr': 2}