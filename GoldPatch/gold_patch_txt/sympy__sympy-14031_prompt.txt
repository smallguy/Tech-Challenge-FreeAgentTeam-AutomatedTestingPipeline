# 修复代码生成提示词（实例ID：sympy__sympy-14031）
## 代码仓库
sympy/sympy

## 原始问题描述
Failed coercion of an expression with E and exp to a field element
```
var('x')
f = 1/(1 + exp(x - S(1)/2)/(1 + exp(x)))
integrate(f, x)
```
throws 
> sympy.polys.polyerrors.CoercionFailed: can't convert 1/(1 + E + 2*exp(1/2)) of type <class 'sympy.core.power.Pow'> to ZZ(exp(1/2))

This is the same kind of an issue that #13970 dealt with, apparently there is more to be done.


## 参考黄金补丁（正确的修复方案）
diff --git a/sympy/integrals/tests/test_integrals.py b/sympy/integrals/tests/test_integrals.py
--- a/sympy/integrals/tests/test_integrals.py
+++ b/sympy/integrals/tests/test_integrals.py
@@ -1262,3 +1262,7 @@ def test_issue_12645():
 
 def test_issue_12677():
     assert integrate(sin(x) / (cos(x)**3) , (x, 0, pi/6)) == Rational(1,6)
+
+def test_issue_14027():
+    assert integrate(1/(1 + exp(x - S(1)/2)/(1 + exp(x))), x) == \
+        x - exp(S(1)/2)*log(exp(x) + exp(S(1)/2)/(1 + exp(S(1)/2)))/(exp(S(1)/2) + E)
diff --git a/sympy/polys/tests/test_fields.py b/sympy/polys/tests/test_fields.py
--- a/sympy/polys/tests/test_fields.py
+++ b/sympy/polys/tests/test_fields.py
@@ -6,7 +6,7 @@
 from sympy.polys.orderings import lex
 
 from sympy.utilities.pytest import raises, XFAIL
-from sympy.core import symbols, E
+from sympy.core import symbols, E, S
 from sympy import sqrt, Rational, exp, log
 
 def test_FracField___init__():
@@ -133,6 +133,8 @@ def test_FracElement_from_expr():
         FracElement)
     assert isinstance(ZZ[x**2].get_field().convert(x**(-6)),
         FracElement)
+    assert isinstance(ZZ[exp(S(1)/3)].get_field().convert(E),
+        FracElement)
 
 
 def test_FracElement__lt_le_gt_ge__():