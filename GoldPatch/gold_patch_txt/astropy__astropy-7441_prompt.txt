# 修复代码生成提示词（实例ID：astropy__astropy-7441）
## 代码仓库
astropy/astropy

## 原始问题描述
astropy.time.TimeDelta should support conversion to `datetime.timedelta`
Because of the inheritance `TimeDelta` has a method `to_datetime` which is useless.

It should have a method `to_timedelta` which returns a `datetime.timedelta` object or objects.

Conversion to `np.datetime64` (for `Time`) and `np.timedelta64` (for `TimeDelta`) would also be great.



## 参考黄金补丁（正确的修复方案）
diff --git a/astropy/time/tests/test_delta.py b/astropy/time/tests/test_delta.py
--- a/astropy/time/tests/test_delta.py
+++ b/astropy/time/tests/test_delta.py
@@ -6,6 +6,8 @@
 
 import pytest
 
+from datetime import timedelta
+
 from .. import (Time, TimeDelta, OperandTypeError, ScaleValueError,
                 TIME_SCALES, STANDARD_TIME_SCALES, TIME_DELTA_SCALES)
 from ... import units as u
@@ -247,6 +249,10 @@ def test_set_format(self):
         assert dt.value == 1.0
         assert dt.format == 'jd'
 
+        dt.format = 'datetime'
+        assert dt.value == timedelta(days=1)
+        assert dt.format == 'datetime'
+
 
 class TestTimeDeltaScales():
     """Test scale conversion for Time Delta.
@@ -504,3 +510,37 @@ def test_timedelta_mask():
     assert np.all(t.mask == [False, True])
     assert allclose_jd(t[0].value, 1)
     assert t.value[1] is np.ma.masked
+
+
+def test_python_timedelta_scalar():
+    td = timedelta(days=1, seconds=1)
+    td1 = TimeDelta(td, format='datetime')
+
+    assert td1.sec == 86401.0
+
+    td2 = TimeDelta(86401.0, format='sec')
+    assert td2.datetime == td
+
+
+def test_python_timedelta_vector():
+    td = [[timedelta(days=1), timedelta(days=2)],
+          [timedelta(days=3), timedelta(days=4)]]
+
+    td1 = TimeDelta(td, format='datetime')
+
+    assert np.all(td1.jd == [[1, 2], [3, 4]])
+
+    td2 = TimeDelta([[1, 2], [3, 4]], format='jd')
+    assert np.all(td2.datetime == td)
+
+
+def test_timedelta_to_datetime():
+    td = TimeDelta(1, format='jd')
+
+    assert td.to_datetime() == timedelta(days=1)
+
+    td2 = TimeDelta([[1, 2], [3, 4]], format='jd')
+    td = [[timedelta(days=1), timedelta(days=2)],
+          [timedelta(days=3), timedelta(days=4)]]
+
+    assert np.all(td2.to_datetime() == td)