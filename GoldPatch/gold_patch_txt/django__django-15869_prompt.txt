# 修复代码生成提示词（实例ID：django__django-15869）
## 代码仓库
django/django

## 原始问题描述
Deprecate length_is template filter in favor of length.
Description
	 
		(last modified by Nick Pope)
	 
The length_is template filter is a vestige from the days of the {% ifequal %} and {% ifnotequal %} tags before {% if %} arrived with support for comparison with operators. Even the example in the documentation (see ​here) is poor: {{ value|length_is:"4" }} will only return one of three possible values - True, False, or "", the empty string being for errors in the provided values.
It seems to me that it would be better to encourage use of the length template filter with the {% if %} template tag which can provide more flexibility:
{# Before: #}
{% if value|length_is:"4" %}...{% endif %}
{{ value|length_is:"4" }} ← This is of dubious use given the restricted set of possible output values.
{# After: #}
{% if value|length == 4 %}...{% endif %}
{% if value|length == 4 %}True{% else %}False{% endif %} ← Much clearer but also allows customising the output values.


## 参考黄金补丁（正确的修复方案）
diff --git a/tests/template_tests/filter_tests/test_length_is.py b/tests/template_tests/filter_tests/test_length_is.py
--- a/tests/template_tests/filter_tests/test_length_is.py
+++ b/tests/template_tests/filter_tests/test_length_is.py
@@ -1,9 +1,11 @@
 from django.template.defaultfilters import length_is
-from django.test import SimpleTestCase
+from django.test import SimpleTestCase, ignore_warnings
+from django.utils.deprecation import RemovedInDjango51Warning
 
 from ..utils import setup
 
 
+@ignore_warnings(category=RemovedInDjango51Warning)
 class LengthIsTests(SimpleTestCase):
     @setup({"length_is01": '{% if some_list|length_is:"4" %}Four{% endif %}'})
     def test_length_is01(self):
@@ -103,6 +105,7 @@ def test_length_is11(self):
         self.assertEqual(output, "")
 
 
+@ignore_warnings(category=RemovedInDjango51Warning)
 class FunctionTests(SimpleTestCase):
     def test_empty_list(self):
         self.assertIs(length_is([], 0), True)
@@ -111,3 +114,17 @@ def test_empty_list(self):
     def test_string(self):
         self.assertIs(length_is("a", 1), True)
         self.assertIs(length_is("a", 10), False)
+
+
+class DeprecationTests(SimpleTestCase):
+    @setup(
+        {"length_is_warning": "{{ string|length_is:3 }}"},
+        test_once=True,
+    )
+    def test_length_is_warning(self):
+        msg = (
+            "The length_is template filter is deprecated in favor of the length "
+            "template filter and the == operator within an {% if %} tag."
+        )
+        with self.assertRaisesMessage(RemovedInDjango51Warning, msg):
+            self.engine.render_to_string("length_is_warning", {"string": "good"})