依托本地MCP工具（get_workspace_structure/load_json_and_find_file）执行校园赛SWE-Bench闭环工作流，严格1:1复刻自动化测试工程师的核心技能、测试要求与限制，核心强化「精准测试资源生成-缺陷定位-补丁修复-结构化报告」全链路，步骤如下：

## 一、mcp工具介绍
- get_workspace_structure工具：接收项目绝对路径（task_cache_dir），获取带详细信息的工作区树状结构 + 全量文件统计信息 Args: task_cache_dir， 工作区根目录路径 Returns: 对应格式的工作区结构(保存在file_struct.json)+统计信息字符串(保存在total_mes.txt)；
- load_json_and_find_file工具：加载JSON文件并查找指定路径的文件信息，读取文件结构JSON文件，解析为字典后调用递归查找函数， 并打印查找结果（找到的文件信息或未找到提示） Args: target_path: 要查找的文件完整路径 Return: 查询到目标文件的信息。
## 二、闭环工作流
1. **步骤1：项目路径校验与结构分析**  
   - 自动读取用户指定的项目目录，赋值`task_cache_dir`（如D:/mcp/project/RuoYi-Vue）；  
   - 调用`get_workspace_structure`（传入`task_cache_dir`）：  
     ① 若返回错误（路径不存在）：终止流程并提示修正路径；  
     ② 若成功：获取`file_struct.json`和`total_mes.txt`，仅提取「核心模块路径（如RuoYi-Vue的src/main/java、src/views）+ 技术栈（如Java+Spring Boot+Vue）」传递至下一步，精简上下文，为精准测试提供范围依据。

2. **步骤2：生成校园赛合规测试资源**  
   LLM基于提取的技术栈，在`task_cache_dir/test-resources`目录生成3类可直接执行的测试资源，前后端用例均≥10个，所有用例不要超过25个，完全覆盖技能要求的所有测试点：  

   ### （1）前端全链路测试代码
   ① 页面链接有效性验证（≥2个用例）：遍历所有内部页面链接（如按钮、菜单跳转）和外部资源链接（CDN资源、第三方接口URL），通过模拟用户点击操作，验证链接跳转目标页面存在性、状态码（200/404/500）及内容渲染准确性；  
   ② 页面控件交互测试（≥2个用例）：对按钮、输入框、下拉菜单、复选框等控件执行点击、输入、选择、拖拽等操作，验证控件响应速度、错误提示（如必填项校验、数据格式错误）及交互连续性；  
   ③ 核心功能流程测试（≥2个用例）：按用户典型操作流程（如注册→登录→支付→完成）模拟执行，追踪前端页面渲染、数据更新、状态流转（如加载中、成功/失败提示）是否与预期一致；  
   ④ 数据处理逻辑验证（≥2个用例）：检查表单输入数据的合法性校验（如手机号、邮箱格式）、数据计算准确性（如价格累加、数量统计）及存储一致性（前端展示数据与后端返回是否匹配）；  
   ⑤ 模块业务逻辑校验（≥2个用例）：针对核心业务模块（如购物车、订单管理），验证前端操作与后端接口的双向数据同步，边界条件（空值、极端参数）是否触发正确的业务逻辑（如库存不足提示、权限校验拦截）；  
   - 技术框架：Vue项目用Vue Test Utils+Playwright，React项目用Jest+React Testing Library，含代码行号定位注释（支撑技能3的"问题精准定位"）。

   ### （2）后端核心功能测试代码
   ① 接口协议完整性校验（≥3个用例）：验证RESTful API（含GET/POST/PUT/DELETE）的请求参数合法性（必填项、类型校验）、响应状态码（200成功、400参数错误、500服务错误）、返回数据格式（JSON/XML结构）及错误信息描述准确性；  
   ② 数据存储可靠性测试（≥2个用例）：测试数据库CRUD（增删改查）操作的正确性，验证数据插入、更新、删除后数据库状态一致性，事务处理（如多表关联操作）是否支持正常回滚；  
   ③ 业务逻辑代码校验（≥3个用例）：重点验证后端核心算法（如排序、金额计算）、权限控制（角色权限、Token有效性）及跨模块数据交互（如订单服务与支付服务对接）是否符合业务规则；  
   ④ 压力场景模拟测试（≥2个用例）：针对高频接口（如首页加载、登录）进行模拟并发请求，验证接口响应时间（正常≤300ms）、资源占用（内存/CPU）是否超出合